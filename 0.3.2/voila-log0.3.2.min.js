/**
 * Voila Javascript Client API
 * https://github.com/mbst/voila-js
 * Provided by MetaBroadcast
 * v0.2
 *
 * Plugins and licenses.
 * ---------------------
 * jXHR.js (JSON-P XHR)
 * v0.1 Â© Kyle Simpson
 * MIT License
 */(function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()})("Voila",function(){var e=function(e,t){var n=this,r=null,i=0,s=0,o=null,u=250;if(!e)throw new Error("No arguments supplied");this.apiKey=null;this.version="1.0";this.content=null;this.url="https://voila.metabroadcast.com";this.hoverItems=[];this.trackingId=null;this.referrer=null;this.logging=!0;this.userCookie={name:!1,value:!1};this.timeout=2e3;e&&e.apiKey&&(this.apiKey=e.apiKey);e&&e.version&&(this.version=e.version);e&&e.content&&(this.content=e.content);e&&e.host&&(e&&e.host.indexOf("http")===-1?this.url="https://"+e.host:this.url=e.host);e&&e.trackingId&&(this.parent=e.trackingId);document.referrer&&(this.referrer=document.referrer);e&&typeof e.logging!="undefined"&&(this.logging=e.logging);e&&e.userCookieName&&(this.userCookie.name=e.userCookieName);e&&e.timeout&&(this.timeout=e.timeout)};e.prototype.logLoad=function(e){var t=this,n=new jXHR,r=null,i=!1,s=t.url;n.timeout=t.timeout;n.onerror=function(t,n){e&&e({error:t})};s=s+"/"+t.version+"/log?apiKey="+encodeURIComponent(t.apiKey)+"&event=page-load";t.trackingId&&(s+="&tracking_id="+encodeURIComponent(t.trackingId));if(t.content){i||(i=[]);t.content.indexOf("http")!==-1?s+="&x-purple-external-uri="+encodeURIComponent(t.content):s+="&x-purple-id="+encodeURIComponent(t.content)}var o=t.getCookie(t.userCookie.name);o&&(s+="&X-User-Id="+encodeURIComponent(o));t.referrer&&(s+="&referrer="+encodeURIComponent(t.referrer));s+="&cb="+(new Date).getTime();n.open("GET",s);n.send()};return e});(function(e){var t=e.setTimeout,n=e.document,r=0;e.jXHR=function(){function f(){try{u.parentNode.removeChild(u)}catch(e){}}function l(){s=!1;i="";f();u=null;p(0)}function c(e){try{a.onerror.call(a,e,i)}catch(t){throw new Error(e)}}function h(){if(this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded"||s)return;this.onload=this.onreadystatechange=null;s=!0;a.readyState!==4&&a.readyState===2&&c("Script failed to load ["+i+"].");f()}function p(e,t){t=t||[];a.readyState=e;typeof a.onreadystatechange=="function"&&a.onreadystatechange.apply(a,t)}var i,s,o,u,a=null;a={onerror:null,onreadystatechange:null,readyState:0,open:function(t,n){l();internal_callback="cb"+r++;(function(t){e.jXHR[t]=function(){try{p.call(a,4,arguments)}catch(n){a.readyState=-1;c("Script failed to run ["+i+"].")}e.jXHR[t]=null}})(internal_callback);i=n.replace(/=\?/,"=jXHR."+internal_callback);p(1)},send:function(){t(function(){u=n.createElement("script");u.setAttribute("type","text/javascript");u.onload=u.onreadystatechange=function(){h.call(u)};u.setAttribute("src",i);n.getElementsByTagName("head")[0].appendChild(u)},0);p(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}};l();return a}})(window);