/**
 * Voila Javascript Client API
 * https://github.com/mbst/voila-js
 * Provided by MetaBroadcast
 * v0.3.4
 *
 * Plugins and licenses.
 * ---------------------
 * Qwery - A Blazing Fast query selector engine
 * https://github.com/ded/qwery
 * copyright Dustin Diaz & Jacob Thornton 2011
 * MIT License
 * ---------------------
 * jXHR.js (JSON-P XHR)
 * v0.1 Â© Kyle Simpson
 * MIT License
 */
(function(a,b){if(typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&typeof define.amd==="object"){define(b)}else{this[a]=b()}}})("Voila",function(){var f="Submitted. Please check your browsers network log to confirm success.";var b=function(r,t){var s=this,u=null,n=0,m=0,l=null,h=250;if(!r){throw new Error("No arguments supplied")}this.apiKey=null;this.version="1.0";this.content=null;this.url="https://voila.metabroadcast.com";this.hoverItems=[];this.trackingId=null;this.referrer=null;this.logging=true;this.userCookie={name:false,value:false};this.timeout=2000;if(r&&r.hoverTimeout){h=r.hoverTimeout}function k(i){l=setTimeout(function(){var v=null;var j=i.target.attributes;for(n=j.length;n--;){if(j[n].nodeName==="data-content"){v=j[n].nodeValue}}s.logHover(v,function(w){if(w.error){}else{}})},h)}function p(){clearTimeout(l)}if(r&&r.apiKey){this.apiKey=r.apiKey}if(r&&r.version){this.version=r.version}if(r&&r.content){this.content=r.content}if(r&&r.host){if(r&&r.host.indexOf("http")===-1){this.url="https://"+r.host}else{this.url=r.host}}if(r&&r.hoverItems){for(n=r.hoverItems.length;n--;){u=qwery(r.hoverItems[n]);for(m=u.length;m--;){try{u[m].addEventListener("mouseover",k);u[m].addEventListener("mouseout",p)}catch(q){u[m].attachEvent("mouseover",k);u[m].attachEvent("mouseout",p)}this.hoverItems.push(u[m])}}}if(r&&r.trackingId){this.parent=r.trackingId}if(document.referrer){this.referrer=document.referrer}if(r&&typeof r.logging!=="undefined"){this.logging=r.logging}if(r&&r.userCookieName){this.userCookie.name=r.userCookieName}if(r&&r.timeout){this.timeout=r.timeout}};b.prototype.pageLoad=function(i){var h=this;if(h.content){h.getTracking(function(j){if(!j.error){h.trackingId=j.success;if(h.logging===true){h.logLoad()}}if(i){i(j)}})}else{h.logLoad(function(){if(i){i({success:null})}})}};b.prototype.setContentId=function(h){this.content=h};b.prototype.setContentUri=function(h){this.content=h};b.prototype.getContent=function(j,n){var h=this,l=h.content,m=new jXHR(),i=h.url+"/"+h.version+"/content?apiKey="+h.apiKey;if(j&&j.content){l=j.content}if(l.indexOf("http")!==-1){i+="&uri="+l}else{i+="&id="+l}if(j&&j.annotations){i+="&annotations="+j.annotations.join(",")}var k=h.getCookie(h.userCookie.name);if(k){i+="&X-User-Id="+k}m.timeout=h.timeout;m.onerror=function(q,p){if(n){n({error:q})}};m.onreadystatechange=function(p){if(m.readyState===4){if(n){n({success:p})}}};i+="&callback=?";m.open("GET",i);m.send()};b.prototype.getTracking=function(l){var h=this,k=new jXHR(),i=h.url+"/"+h.version+"/tracking?apiKey="+h.apiKey;k.timeout=h.timeout;k.onerror=function(n,m){if(l){l({error:n})}};k.onreadystatechange=function(m){if(k.readyState===4){if(m.tracking_id){h.trackingId=m.tracking_id;if(l){l({success:m.tracking_id})}return}if(l){l({error:"No tracking id found"})}}};if(h.content){if(h.content.indexOf("http")!==-1){i+="&contentUri="+h.content}else{i+="&contentId="+h.content}}if(h.parent){i+="&parentTrackingId="+h.parent}var j=h.getCookie(h.userCookie.name);if(j){i+="&X-User-Id="+j}i+="&callback=?";k.open("GET",i);k.send()};b.prototype.logLoad=function(n){var i=this,m=new jXHR(),l=null,h=false,j=i.url;m.timeout=i.timeout;m.onerror=function(q,p){if(n){n({error:q})}};j=j+"/"+i.version+"/log?apiKey="+encodeURIComponent(i.apiKey)+"&event=page-load";if(i.trackingId){j+="&tracking_id="+encodeURIComponent(i.trackingId)}if(i.content){if(!h){h=[]}if(i.content.indexOf("http")!==-1){j+="&x-purple-external-uri="+encodeURIComponent(i.content)}else{j+="&x-purple-id="+encodeURIComponent(i.content)}}var k=i.getCookie(i.userCookie.name);if(k){j+="&X-User-Id="+encodeURIComponent(k)}if(i.referrer){j+="&referrer="+encodeURIComponent(i.referrer)}j+="&cb="+(new Date().getTime());m.open("GET",j);m.send()};b.prototype.logHover=function(j,n){var h=this,m=new jXHR(),l=h.content,i=h.url;m.timeout=h.timeout;m.onerror=function(q,p){if(n){n({error:q})}};i=i+"/"+h.version+"/log?apiKey="+encodeURIComponent(h.apiKey)+"&event=tv-listings-hover";if(h.trackingId){i+="&tracking_id="+encodeURIComponent(h.trackingId)}if(j&&j.content){l=j.content}if(l.indexOf("http")!==-1){i+="&x-purple-external-uri="+encodeURIComponent(l)}else{i+="&x-purple-id="+encodeURIComponent(l)}var k=h.getCookie(h.userCookie.name);if(k){i+="&X-User-Id="+encodeURIComponent(k)}if(h.referrer){i+="&referrer="+encodeURIComponent(h.referrer)}i+="&cb="+(new Date().getTime());m.open("GET",i);m.send()};b.prototype.watching=function(j,n){var h=this,m=new jXHR(),l=h.content,i=h.url;m.timeout=h.timeout;m.onerror=function(q,p){if(n){n({error:q})}};i=i+"/"+h.version+"/log?apiKey="+encodeURIComponent(h.apiKey)+"&event=content-play";if(h.trackingId){i+="&tracking_id="+encodeURIComponent(h.trackingId)}if(j&&j.content){l=j.content}if(l.indexOf("http")!==-1){i+="&x-purple-external-uri="+encodeURIComponent(l)}else{i+="&x-purple-id="+encodeURIComponent(l)}var k=h.getCookie(h.userCookie.name);if(k){i+="&X-User-Id="+encodeURIComponent(k)}if(h.referrer){i+="&referrer="+encodeURIComponent(h.referrer)}i+="&cb="+(new Date().getTime());m.open("GET",i);m.send()};b.prototype.notWatching=function(h,i){if(i){i({success:true})}};b.prototype.currentlyWatching=function(h,i){if(i){i({success:true})}};b.prototype.suggestionsFeedback=function(j,m){var h=this,l=new jXHR(),i=h.url;l.timeout=h.timeout;l.onerror=function(p,n){if(m){m({error:p})}};i=i+"/"+h.version+"/suggestions/feedback/me/@self?apiKey="+h.apiKey;if(h.trackingId){i+="&tracking_id="+encodeURIComponent(h.trackingId)}if(j&&j.id){i+="&id="+encodeURIComponent(j.id)}if(j&&j.action){i+="&action="+encodeURIComponent(j.action)}var k=h.getCookie(h.userCookie.name);if(k){i+="&X-User-Id="+encodeURIComponent(k)}if(h.referrer){i+="&referrer="+encodeURIComponent(h.referrer)}i+="&cb="+(new Date().getTime());l.open("GET",i);l.send()};b.prototype.cookieOptOut=function(k){var h=this,j=new jXHR(),i=h.url+"/"+h.version+"/optout/set?apiKey="+h.apiKey+"&callback=?";j.timeout=h.timeout;j.onerror=function(m,l){if(k){k({error:m})}};j.onreadystatechange=function(l){if(j.readyState===4){if(k){k({success:l})}}};j.open("GET",i);j.send()};b.prototype.cookieOptIn=function(k){var h=this,j=new jXHR(),i=h.url+"/"+h.version+"/optout/remove?apiKey="+h.apiKey+"&callback=?";j.timeout=h.timeout;j.onerror=function(m,l){if(k){k({error:m})}};j.onreadystatechange=function(l){if(j.readyState===4){if(k){k({success:l})}}};j.open("GET",i);j.send()};b.prototype.cookieOptStatus=function(k){var h=this,j=new jXHR(),i=h.url+"/"+h.version+"/optout?apiKey="+h.apiKey+"&callback=?";j.timeout=h.timeout;j.onerror=function(m,l){if(k){k({error:m})}};j.onreadystatechange=function(l){if(j.readyState===4){if(k){k({success:l})}}};j.open("GET",i);j.send()};b.prototype.getCookie=function(k){var j=this,q=j.userCookie.name,n=document.cookie,p={},m=false;if(k){q=k}if(n.length>0){if(n.indexOf(";")!==-1){n=n.split(";");for(var l=n.length;l--;){if(n[l].substr(0,1)===" "){n[l]=n[l].substr(1)}if(n[l].indexOf("=")!==-1){n[l]=n[l].split("=");var h=n[l][0];p[h]=false;n[l].splice(0,1);if(n[l].length>1){n[l]=n[l].join("=")}else{n[l]=n[l][0]}p[h]=n[l]}}if(p[k]){m=p[k]}}}return m};var d=function(k){if(qwery("#voilaframe").length!==0){a()}var j=document.createElement("iframe"),h='<!DOCTYPE html><html><head><link rel="canonical" href="'+window.location.href+'" /></head><body></body></html>';j.setAttribute("id","voilaframe");j.name="voilaframe";j.style.width=0;j.style.height=0;j.style.visibility="hidden";j.style.borderWidth=0;j.style.position="absolute";j.style.left=-9999+"px";j.style.top=-9999+"px";j.src="about:blank";try{j.contentWindow.document.open("text/html","replace");j.contentWindow.document.write(h);j.contentWindow.document.close()}catch(i){}document.body.appendChild(j);j.contentWindow.name="voilaframe";if(k){k({success:j})}return j};var a=function(){document.body.removeChild(qwery("#voilaframe")[0])};var g=function(j){var h=this,k=0,l=null;if(!j||!j.url||!j.id){return false}l=qwery("#"+j.id);if(l.length>0){e(j.id)}l=document.createElement("form");l.setAttribute("id",j.id);l.setAttribute("target","voilaframe");l.setAttribute("method","POST");l.setAttribute("action",j.url+"&cb="+(new Date().getTime()));l.style.width=0;l.style.height=0;l.style.visibility="hidden";l.style.borderWidth=0;l.style.position="absolute";l.style.left=-9999+"px";l.style.top=-9999+"px";if(j&&j.inputs){for(k=j.inputs.length;k--;){l.appendChild(c(j.inputs[k]))}}document.body.appendChild(l);return l};var e=function(h){document.body.removeChild(qwery("#"+h)[0])};var c=function(i){var h=document.createElement("input");h.setAttribute("type","hidden");h.setAttribute("name",i.name);h.setAttribute("value",i.value);return h};return b});(function(a,b){if(typeof module!="undefined"){module.exports=b()}else{if(typeof define=="function"&&typeof define.amd=="object"){define(b)}else{this[a]=b()}}})("qwery",function(){var f=document,E=f.documentElement,R="getElementsByClassName",t="getElementsByTagName",e="querySelectorAll",F="useNativeQSA",n="tagName",O="nodeType",aa,N=/#([\w\-]+)/,m=/\.[\w\-]+/g,ah=/^#([\w\-]+)$/,ad=/^\.([\w\-]+)$/,s=/^([\w\-]+)$/,V=/^([\w]+)?\.([\w\-]+)$/,J=/(^|,)\s*[>~+]/,P=/^\s+|\s*([,\s\+\~>]|$)\s*/g,ai=/[\s\>\+\~]/,A=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,af=/([.*+?\^=!:${}()|\[\]\/\\])/g,b=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,p=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,v=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,u=new RegExp(ah.source+"|"+s.source+"|"+ad.source),j=new RegExp("("+ai.source+")"+A.source,"g"),ae=new RegExp(ai.source+A.source),z=new RegExp(b.source+"("+p.source+")?("+v.source+")?"),K={" ":function(q){return q&&q!==E&&q.parentNode},">":function(q,aj){return q&&q.parentNode==aj.parentNode&&q.parentNode},"~":function(q){return q&&q.previousSibling},"+":function(q,ak,al,aj){if(!q){return false}return(al=S(q))&&(aj=S(ak))&&al==aj&&al}};function l(){this.c={}}l.prototype={g:function(q){return this.c[q]||undefined},s:function(aj,q,ak){q=ak?new RegExp(q):q;return(this.c[aj]=q)}};var X=new l(),w=new l(),C=new l(),Y=new l();function L(q){return X.g(q)||X.s(q,"(^|\\s+)"+q+"(\\s+|$)",1)}function ab(aj,al){var ak=0,q=aj.length;for(;ak<q;ak++){al(aj[ak])}}function y(aj){for(var al=[],ak=0,q=aj.length;ak<q;++ak){D(aj[ak])?(al=al.concat(aj[ak])):(al[al.length]=aj[ak])}return al}function d(aj){var ak=0,q=aj.length,al=[];for(;ak<q;ak++){al[ak]=aj[ak]}return al}function S(q){while(q=q.previousSibling){if(q[O]==1){break}}return q}function W(q){return q.match(z)}function g(au,ay,al,aq,ak,ar,aw,ax,av,at,q){var ap,am,ao,aj,an;if(this[O]!==1){return false}if(ay&&ay!=="*"&&this[n]&&this[n].toLowerCase()!==ay){return false}if(al&&(am=al.match(N))&&am[1]!==this.id){return false}if(al&&(an=al.match(m))){for(ap=an.length;ap--;){if(!L(an[ap].slice(1)).test(this.className)){return false}}}if(av&&T.pseudos[av]&&!T.pseudos[av](this,q)){return false}if(aq&&!aw){aj=this.attributes;for(ao in aj){if(Object.prototype.hasOwnProperty.call(aj,ao)&&(aj[ao].name||ao)==ak){return this}}}if(aq&&!I(ar,Z(this,ak)||"",aw)){return false}return this}function Q(q){return w.g(q)||w.s(q,q.replace(af,"\\$1"))}function I(q,ak,aj){switch(q){case"=":return ak==aj;case"^=":return ak.match(C.g("^="+aj)||C.s("^="+aj,"^"+Q(aj),1));case"$=":return ak.match(C.g("$="+aj)||C.s("$="+aj,Q(aj)+"$",1));case"*=":return ak.match(C.g(aj)||C.s(aj,Q(aj),1));case"~=":return ak.match(C.g("~="+aj)||C.s("~="+aj,"(?:^|\\s+)"+Q(aj)+"(?:\\s+|$)",1));case"|=":return ak.match(C.g("|="+aj)||C.s("|="+aj,"^"+Q(aj)+"(-|$)",1))}return 0}function U(an,aq){var q=[],ar=[],ap,am,ak,al,ax,ao,aj,aw,av=aq,au=Y.g(an)||Y.s(an,an.split(ae)),at=an.match(j);if(!au.length){return q}al=(au=au.slice(0)).pop();if(au.length&&(ak=au[au.length-1].match(ah))){av=r(aq,ak[1])}if(!av){return q}aj=W(al);ao=av!==aq&&av[O]!==9&&at&&/^[+~]$/.test(at[at.length-1])?function(ay){while(av=av.nextSibling){av[O]==1&&(aj[1]?aj[1]==av[n].toLowerCase():1)&&(ay[ay.length]=av)}return ay}([]):av[t](aj[1]||"*");for(ap=0,am=ao.length;ap<am;ap++){if(aw=g.apply(ao[ap],aj)){q[q.length]=aw}}if(!au.length){return q}ab(q,function(ay){if(H(ay,au,at)){ar[ar.length]=ay}});return ar}function B(al,q,aj){if(i(q)){return al==q}if(D(q)){return !!~y(q).indexOf(al)}var ak=q.split(","),an,am;while(q=ak.pop()){an=Y.g(q)||Y.s(q,q.split(ae));am=q.match(j);an=an.slice(0);if(g.apply(al,W(an.pop()))&&(!an.length||H(al,an,am,aj))){return true}}return false}function H(ak,an,am,q){var al;function aj(aq,ao,ap){while(ap=K[am[ao]](ap,aq)){if(i(ap)&&(g.apply(ap,W(an[ao])))){if(ao){if(al=aj(ap,ao-1,ap)){return al}}else{return ap}}}}return(al=aj(ak,an.length-1,ak))&&(!q||ag(al,q))}function i(aj,q){return aj&&typeof aj==="object"&&(q=aj[O])&&(q==1||q==9)}function ac(aj){var q=[],al,ak;o:for(al=0;al<aj.length;++al){for(ak=0;ak<q.length;++ak){if(q[ak]==aj[al]){continue o}}q[q.length]=aj[al]}return q}function D(q){return(typeof q==="object"&&isFinite(q.length))}function a(q){if(!q){return f}if(typeof q=="string"){return T(q)[0]}if(!q[O]&&D(q)){return q[0]}return q}function r(q,ak,aj){return q[O]===9?q.getElementById(ak):q.ownerDocument&&(((aj=q.ownerDocument.getElementById(ak))&&ag(aj,q)&&aj)||(!ag(q,q.ownerDocument)&&aa('[id="'+ak+'"]',q)[0]))}function T(aj,am){var q,al,ak=a(am);if(!ak||!aj){return[]}if(aj===window||i(aj)){return !am||(aj!==window&&i(ak)&&ag(aj,ak))?[aj]:[]}if(aj&&D(aj)){return y(aj)}if(q=aj.match(u)){if(q[1]){return(al=r(ak,q[1]))?[al]:[]}if(q[2]){return d(ak[t](q[2]))}if(G&&q[3]){return d(ak[R](q[3]))}}return aa(aj,ak)}function c(q,aj){return function(ak){var al,am;if(J.test(ak)){if(q[O]!==9){if(!(am=al=q.getAttribute("id"))){q.setAttribute("id",am="__qwerymeupscotty")}ak='[id="'+am+'"]'+ak;aj(q.parentNode||q,ak,true);al||q.removeAttribute("id")}return}ak.length&&aj(q,ak,false)}}var ag="compareDocumentPosition" in E?function(aj,q){return(q.compareDocumentPosition(aj)&16)==16}:"contains" in E?function(aj,q){q=q[O]===9||q==window?E:q;return q!==aj&&q.contains(aj)}:function(aj,q){while(aj=aj.parentNode){if(aj===q){return 1}}return 0},Z=function(){var q=f.createElement("p");return((q.innerHTML='<a href="#x">x</a>')&&q.firstChild.getAttribute("href")!="#x")?function(ak,aj){return aj==="class"?ak.className:(aj==="href"||aj==="src")?ak.getAttribute(aj,2):ak.getAttribute(aj)}:function(ak,aj){return ak.getAttribute(aj)}}(),G=!!f[R],h=f.querySelector&&f[e],M=function(aj,ak){var q=[],am,an;try{if(ak[O]===9||!J.test(aj)){return d(ak[e](aj))}ab(am=aj.split(","),c(ak,function(ao,ap){an=ao[e](ap);if(an.length==1){q[q.length]=an.item(0)}else{if(an.length){q=q.concat(d(an))}}}));return am.length>1&&q.length>1?ac(q):q}catch(al){}return k(aj,ak)},k=function(al,ao){var aq=[],an,aj,am,ak,q,ap;al=al.replace(P,"$1");if(aj=al.match(V)){q=L(aj[2]);an=ao[t](aj[1]||"*");for(am=0,ak=an.length;am<ak;am++){if(q.test(an[am].className)){aq[aq.length]=an[am]}}return aq}ab(ap=al.split(","),c(ao,function(ar,at,au){q=U(at,ar);for(am=0,ak=q.length;am<ak;am++){if(ar[O]===9||au||ag(q[am],ao)){aq[aq.length]=q[am]}}}));return ap.length>1&&aq.length>1?ac(aq):aq},x=function(q){if(typeof q[F]!=="undefined"){aa=!q[F]?k:h?M:k}};x({useNativeQSA:true});T.configure=x;T.uniq=ac;T.is=B;T.pseudos={};return T});(function(c){var b=c.setTimeout,d=c.document,a=0;c.jXHR=function(){var e,g,n,h,m=null;function l(){try{h.parentNode.removeChild(h)}catch(p){}}function k(){g=false;e="";l();h=null;i(0)}function f(q){try{m.onerror.call(m,q,e)}catch(p){throw new Error(q)}}function j(){if((this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded")||g){return}this.onload=this.onreadystatechange=null;g=true;if(m.readyState!==4&&m.readyState===2){f("Script failed to load ["+e+"].")}l()}function i(p,q){q=q||[];m.readyState=p;if(typeof m.onreadystatechange==="function"){m.onreadystatechange.apply(m,q)}}m={onerror:null,onreadystatechange:null,readyState:0,open:function(q,p){k();internal_callback="cb"+(a++);(function(r){c.jXHR[r]=function(){try{i.call(m,4,arguments)}catch(s){m.readyState=-1;f("Script failed to run ["+e+"].")}c.jXHR[r]=null}})(internal_callback);e=p.replace(/=\?/,"=jXHR."+internal_callback);i(1)},send:function(){b(function(){h=d.createElement("script");h.setAttribute("type","text/javascript");h.onload=h.onreadystatechange=function(){j.call(h)};h.setAttribute("src",e);d.getElementsByTagName("head")[0].appendChild(h)},0);i(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}};k();return m}})(window);
